<div class="container main-container">
    <form id="order-form" [formGroup]="orderForm" (ngSubmit)="onSubmit()">
        <div class="text-center" translate>
            Senden Sie uns das ausgefüllte Formular. Mit unserer Bestätigung starten wir i.d.R. innerhalb eines Tages das Hosting.
        </div>

        <h3 translate>Hostingauswahl</h3>
        <mat-form-field>
            <mat-label>
                <span translate>OpenSlides-Hostingpaket</span>
            </mat-label>
            <mat-select formControlName="package" required>
                <mat-option value="meeting">
                    {{ 'Sitzung' | translate }} ({{ 'bis 50 TLN' | translate }} · 50€/{{ 'Monat' | translate }} {{ 'zzgl. USt' | translate }})
                </mat-option>
                <mat-option value="conference">
                    {{ 'Tagung' | translate }} ({{ 'bis 500 TLN' | translate }} · 100€/{{ 'Monat' | translate }} {{ 'zzgl. USt' | translate }})
                </mat-option>
                <mat-option value="congress">
                    {{ 'Kongress' | translate }} ({{ 'bis 1.000 TLN' | translate }} · 200€/{{ 'Monat' | translate }} {{ 'zzgl. USt' | translate }})
                </mat-option>
            </mat-select>
        </mat-form-field><br>
        <mat-form-field fxFlex.gt-sm="75" class="mb-1">
            <input required type="text" matInput formControlName="domain" placeholder="{{ 'Wunschdomain' | translate }}">
            <span matSuffix>.openslides.com</span>
            <mat-hint *ngIf="orderForm.controls.domain.valid">https://{{orderForm.controls.domain.value}}.openslides.com/</mat-hint>
        </mat-form-field>

        <b translate>Zusatzfunktionen</b>
        <div formGroupName="services">
            <div *ngFor="let service of services | keyvalue: originalOrder">
                <mat-checkbox [formControlName]="service.key">{{ service.value | translate }}</mat-checkbox>
                <a class="details-link" target="_blank" routerLink="/pricing" [fragment]="service.key">Details</a>
            </div>
        </div>

        <h3 class="mb-0" translate>Veranstaltungsdetails</h3>
        <mat-form-field>
            <input required type="text" matInput formControlName="event_name" placeholder="{{ 'Veranstaltungsname' | translate }}">
        </mat-form-field>
        <mat-form-field>
            <input required type="text" matInput formControlName="event_location" placeholder="{{ 'Veranstaltungsort' | translate}}">
        </mat-form-field>
        <mat-form-field>
            <input required type="text" matInput formControlName="event_date" placeholder="{{ 'Veranstaltungszeitraum' | translate }}">
        </mat-form-field>
        <mat-form-field>
            <input required type="number" matInput min="0" formControlName="expected_users" placeholder="{{ 'Erwartete Teilnehmeranzahl' | translate }}">
        </mat-form-field>

        <h3 class="mb-0" translate>Ansprechpartner</h3>
        <div formGroupName="contact_person" class="mb-1">
            <mat-form-field>
                <input required type="text" matInput formControlName="name" placeholder="{{ 'Name' | translate }}">
            </mat-form-field>
            <mat-form-field>
                <input required type="text" matInput formControlName="organisation" placeholder="{{ 'Organisation' | translate }}">
            </mat-form-field>
            <div fxLayout="row wrap" appWrappable wrapMargin="4%">
                <mat-form-field fxFlex.gt-sm="46">
                    <input required type="email" matInput formControlName="email" placeholder="{{ 'E-Mail' | translate }}">
                </mat-form-field>
                <mat-form-field fxFlex.gt-sm="46">
                    <input required type="tel" matInput formControlName="phone" placeholder="{{ 'Telefon' | translate }}">
                </mat-form-field>
            </div>
        </div>

        <h3 class="mb-0" translate>Zusätzliche Angaben</h3>
        <div class="mb-1">
            <mat-form-field>
                <textarea 
                    required 
                    type="text"
                    matInput
                    cdkTextareaAutosize
                    formControlName="billing_address"
                    placeholder="{{ 'Rechnungsadresse' | translate }}"
                ></textarea>
            </mat-form-field>
            <mat-form-field>
                <textarea 
                    type="text"
                    matInput
                    cdkTextareaAutosize
                    formControlName="comment"
                    placeholder="{{ 'Ihre Anmerkungen und Wünsche' | translate }}"
                ></textarea>
            </mat-form-field>
        </div>

        <button type="submit" [disabled]="!orderForm.valid" mat-flat-button class="os-button">
            <span translate>Anfrage absenden</span>
        </button>
        <div class="error-div mt-1" *ngIf="error">
            <span translate>Fehler:</span><br>
            {{ error }}
        </div>
    </form>
</div>
